syntax = "proto3";

package mlsys;

// import "DalaoProto/source_type.proto";
// import "DalaoProto/service_type.proto";

message MediaRecord {
    // RedKV key, index
    string      block_id      = 1; // note id, user id ...
    string      file_id       = 2; // image id, audio id, ...

    int32       service       = 3; // search filter : ServiceType
    int32       source_type   = 4; // search filter : SourceType

    int64       update_time        = 5; // db update time
    int64       user_update_time   = 6; // user update time

    // message info for router, will not save to db
    string      url           = 7; // 
    int64       born_time     = 8; // 

    // range search
    float       float_label_1    = 10; 
    float       float_label_2    = 11; 
    float       float_label_3    = 12; 

    string      string_label_1   = 13;
    string      string_label_2   = 14;
    string      string_label_3   = 15;

    int32       int_label_1      = 16;
    int32       int_label_2      = 17;
    int32       int_label_3      = 18;

    repeated string file_id_list = 98;
    string          note_oid     = 99; 

    // RedKV value, rules :
    // * serialized model result
    // * sizeof(info) < 1kb
    // * protobuf is highly recommended
    bytes       info          = 100; 
}

message HistoryRecord {
    repeated MediaRecord records = 1;
    string date = 2; // YYYYMMDD
}

