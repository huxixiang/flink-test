syntax = "proto3";
package mlsys;

// =============== response param =============
message CVResponse {
    LabelResponse label_response = 1;
    DetectResponse detect_response = 2;
}
// =============== response param detail =============
enum CVStatus {
    SUCCEED_NORMAL       = 0; //成功返回该请求。从模型角度，结果是正常的。
    SUCCEED_HIT          = 1;  //成功返回该请求。从模型角度，结果是异常的,命中一些标签。
    PROCESSING    = 2;
    FAIL          = 3;

    // ERR
    ERROR_UKNOWN = 100;
    ERROR_URL_DOWNLOAD = 101;
    ERROR_DB_RED_KEY = 102;

    // CV ERR
    ERROR_CV_ERR = 601;
    ERROR_IMAGE_PREPROCESS = 602;
    ERROR_MODEL_INFERENCE = 603;

}
// === 类别1： 图片，打标签 ===
message LabelResponse {
    CVStatus result_status = 1;
    repeated LabelInfo label_infos = 2;
}

// === 类别2：图片，目标检测 ===
message DetectResponse {
    CVStatus result_status = 1;
    repeated  DetectInfo detect_infos = 2;
}

message Coordinate {
    double x = 1;
    double y = 2;
}
message LabelInfo {
    int32 label = 1; // 标签名称，比如：颜值，face_id,腿部特写，OCR
    double score = 2; // 得分，0-1之间，越大越可信
    string info = 3; // 描述，标签的描述，比如,OCR识别的信息、face_id
}

//每个检测框实例的信息
message DetectInfo {
    int32 instance_index = 1; //该实例序号
    double score = 2; //检测的置信度
    repeated Coordinate coordinates = 3; //坐标类信息，比如检测矩形框的坐标、人脸关键点。
    repeated LabelInfo label_infos = 4; //该实例各属性的信息
}





