syntax = "proto3";
option java_package = "com.xiaohongshu.ads.service.log.schema";
option java_outer_classname = "AdsSearchEventSchema";

message AdsSearchEvent {
    string query = 1;
    string request_id = 2;
    string track_id = 3;
    string search_id = 4;
    string platform = 5;
    string structured_query = 6;
    string user_id = 7;
    int32 placement = 8;
    string origin_query = 9;
    repeated string hot_tags = 10;
    repeated string note_filter_list = 11;
    repeated AdsSearchNoteInfo ads_note_info = 12;
    string ads_city = 13;
    string ads_city_source = 14;
    string ads_country = 15;
    string ads_province = 16;
    int32 ads_gender = 17;
    string ads_age = 18;
    repeated int32 exp_ids = 19;
    string pos1_revprice_filter_ads = 20;
    int32 rt = 21;
    string xhs_zone = 22;
}

message AdsSearchNoteInfo {
    string user_id = 1;
    // 笔记 id
    string note_id = 2;
    // adsUUID
    string ads_id = 3;
    // advertiser id
    string advertiser_id = 4;
    // campaign id
    string campaign_id = 5;
    // unit id
    string unit_id = 6;
    // creative id
    string creative_id = 7;
    // 位置
    int32 index = 8;
    // cpm
    double cpm = 9;
    // Ranking Score
    string ranking_score = 10;
    // reason type
    string reason_type = 11;
    // advertiser bid
    double bid = 12;
    // the price that we are going to charge to advertiser
    double price = 13;
    // bid type
    string bid_type = 14;
    // creativity type
    string creativity_type = 15;
    // predicted click through rate
    double pctr = 16;
    // track type
    string track_type = 17;
    // track id
    string track_id = 18;
    // rank position in current request
    int32 rank_position = 19;
    // if inserted in current request
    bool is_inserted = 20;
    // second jump type
    string second_jump_type = 21;
    // Match sucMatchTags
    string suc_match_tags = 22;
    // 0 for not uac, 1 for uac
    int32 uac_tag = 23;
    // 薯条广告作者ID
    string author_id = 24;
    // 时间片实验分组
    repeated string slot_exp_groups = 25;
    // 请求时间
    int64 request_time = 26;
    // 请求时间片
    string request_slot = 27;

    // 搜索广告专有字段
    // bidwordInfo
    string bidword = 28;
    int32 matchtype = 29;
    double matchscore = 30;
    int32 bidword_source = 31;
    int32 submatch_type = 32;
    int32 bidword_flag = 33;
    double duration_score = 34;

    double add_cart_score = 35;
    double pcvr = 36;
    int32 ori_bid = 37;
    float pctr0 = 38;
    float pctr1 = 39;
    float pctr2 = 40;
    float pctr3 = 41;
    float pctr4 = 42;
    int32 use_grab_ranking = 43;
    int32 grab_target = 44;
    double bid_ratio = 45;
    int32 grab_result_flag = 46;
    double ori_pctr = 47;
    // material字段
    string material = 48;
    double cvr_pcoc = 49;
    double jfb = 50;
    double cali_pcvr = 51;
    double given_cpa = 52;
    string bucket_id = 53;
    string fzm1 = 54;
    string fzm2 = 55;
    string fzm3 = 56;
    double pid_coef = 57;
    double kt = 58;
    double k_last = 59;
    int32 ocpc_stage = 60;
    string log_json = 61;
    double cumCost = 62;
    double cumBid = 63;
    double cumPcvr = 64;
    double cumConvert = 65;
    // 多路召回
    int32 retrievalChannel = 66;
    string retrievalStrategy = 67;
}

