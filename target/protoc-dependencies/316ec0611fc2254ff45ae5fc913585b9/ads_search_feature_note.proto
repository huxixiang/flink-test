syntax = "proto3";
import "google/protobuf/any.proto";
option java_package = "com.xiaohongshu.ads.adsdata.search.schema";
package ads.data.search.proto;

message AdsSearchFeatureNote {

    string note_id = 1;
    int64 creativity_id = 2;
    int64 unit_id = 3;
    int64 campaign_id = 4;
    string v_seller_id = 5;
    // 1 图文,2 视频
    int32 note_type = 6;
    repeated Image image = 7;
    // 笔记正文
    string content = 8;
    // 笔记标题
    string title = 9;

    // 笔记 nlp 类目
    map<string, float> nlp_taxonomy_1 = 10;
    map<string, float> nlp_taxonomy_2 = 11;
    map<string, float> nlp_taxonomy_3 = 12;

    // 笔记nlp实体词
    repeated NlpEntity nlp_entity = 13;
    // 笔记nlp关键词
    map<string, float> nlp_keywords = 14;
    // 笔记nlp品牌
    map<string, float> nlp_brand = 15;

    message Image {
        // 图片的 url
        string url = 1;
        // ocr 识别词 list
        repeated OcrInfo ocr_info_list = 2;
        // 图片类别
        repeated LabelInfo label_info_list = 4;

    }

    message OcrInfo {

        // 原始词
        string info = 1;

        // 识别率
        string info_percent = 2;

        // ocr 识别 score
        double score = 3;

        // nlp 对 ocr info 切词
        repeated string word = 4;
    }

    message LabelInfo {
        double score = 1;
        int32 label_id = 2;
        int32 parrent_label_id = 3;
        string label_name = 4;
        string info = 5;
    }

    message NlpEntity{
        // 实体名
        string entity_name = 1;
        // 实体类型
        string entityType = 2;
        // 实体来源
        string source = 3;
        // 置信度
        float score = 4;

    }
}