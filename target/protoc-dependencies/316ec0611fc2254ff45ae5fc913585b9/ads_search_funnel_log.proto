syntax = "proto3";
option java_package = "com.xiaohongshu.adsservice.funnel.log.schema";
option java_outer_classname = "AdsSearchFunnelSchema";
// 请求粒度字段
message AdsSearchFunnelInfo {
    //请求信息
    string query = 1;
    string request_id = 2;
    string user_id = 3;
    int64 request_time = 4;
    string search_id = 5;
    string platform = 6;
    int32 placement = 7;
    string ads_city = 8;
    string ads_province = 9;
    int32 ads_gender = 10;
    string ads_age = 11;
    repeated int32 exp_ids = 12;
    //request info extension
    string request_info_extension = 13;
    //广告列表信息
    repeated AdsSearchFunnelItemInfo ads_item_info = 14;
    string query_detail_info = 15;
}

// 广告粒度字段
message AdsSearchFunnelItemInfo {
    //广告信息
    string user_id = 1;
    string note_id = 2;
    string ads_id = 3;
    string advertiser_id = 4;
    string campaign_id = 5;
    string unit_id = 6;
    string creative_id = 7;

    //校准信息
    string cali_info = 8;

    //智能投放信息
    string smartbid_info = 9;

    //抢排名信息
    string grabranking_info = 10;

     //保留价信息
     string ugsp_reserve_price_info = 11;

     //排序信息
     double ori_pctr = 12;
     double pctr = 13;
     double cali_pctr =  14;
     string pvalue_info = 15;
     string cali_pvalue_info = 16;
     int32 ori_bid = 17;
     int32 bid = 18;

     //计费信息
     string price = 19;

     //位次信息
     string rank_position = 20;

     // 召回匹配方式及分数
     string bidword = 21;
     int32 matchtype  = 22;
     double matchscore = 23;
     int32 submatch_type = 24;

     //广告过滤信息
     string eCommerceExp_filter_flag = 25;
     string relevance_filter_flag = 26;
     string minPctr_filter_flag = 27;
     string minQuerPctr_filter_flag = 28;
     string minEcpm_filter_flag = 29;
     string minQuerEcpm_filter_flag = 30;
     string campainBackfillDeque_filter_flag = 31;
     string auctionValid_filter_flag = 32;

     //auction info extension
     string ads_info_extension = 33;

    // 相关性过滤原因
    string filter_reason = 34;
    string relevance_detail_info = 35;
    // 去重detail flag
    string deq_campId_filter_flag = 36;
    string deq_leadsAdv_filter_flag = 37;
    string deq_noteId_filter_flag = 38;
    string deq_goodsId_filter_flag = 39;
    string deq_blackList_filter_flag = 40;
}
