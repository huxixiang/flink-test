syntax = "proto3";

option java_package = "red.sns.feedsranking.server.log.schema";
option java_outer_classname = "FeedsAdRankingAdpvInfo";

message RequestInfo {
    string request_id = 1;
    string user_id = 2;
    string version = 3;
    map<string, string> ranking_exp_extra_info = 4;
    int64 request_ts = 5;
}

message AdsInfo {
    string advertiser_id = 1;
    string ads_id = 2;
    string ads_uuid = 3;
    string campaign_id = 4;
    int32 unit_id = 5;
    BiddingInfo bidding_info = 6;
    int32 marketing_target = 7;
    int32 bid_type = 8;
    int32 advertise_target = 9;
    int32 ccpc_budget = 10; // deprecated; move to budget
    int32 insert_position = 11;
    int32 bidding_strategy = 12;
    int32 optimize_target = 13;
    int32 bcb_budget = 14; // deprecated; move to budget
    string note_id = 15;
    int32 gcpm_budget = 16; // deprecated; move to budget
    int32 budget = 17;
    int32 competition_sample_idx = 18;
    int32 platform = 19;
    int32 constraint_type = 20;
}

message BiddingInfo {
    int32 bid = 1;
    double ranking_score = 2;
    double pctr = 3;
    double first_ranking_score = 4;
    double first_pctr = 5;
    string model_name = 6;
    double bid_power = 7;
    string final_model_name = 8;
    double final_model_calibration = 9;
    double p_page_time = 10;
    double p_conversion = 11;
    int32 origin_bid = 12;
    int32 ccpc_first_bid = 13; // deprecated; move to first_bid
    double ccpc_final_alpha = 14; // deprecated; move to final_alpha
    double ces = 15;
    double ecpm = 16;
    double ugsp_score = 17;
    double b_conversion = 18;
    double p_like = 19;
    double p_collect = 20;
    double p_comment = 21;
    double p_share = 22;
    double p_follow = 23;
    double p_screenshot = 24;
    double p_save_to_album = 25;
    int32 auction_price = 26;
    double hide_rate = 27;
    repeated int32 exp_ids = 28;
    int32 bcb_first_bid = 29; // deprecated; move to first_bid
    double bcb_final_alpha = 30; // deprecated; move to final_alpha
    double p_gcr = 31;
    double hide_score = 32;
    int32 gcpm_first_bid = 33; // deprecated; move to first_bid
    double gcpm_final_alpha = 34; // deprecated; move to final_alpha
    double gcpm_final_beta = 35; // deprecated; move to final_beta
    double gcpm_first_avg_pcvr = 36; // deprecated; move to first_avg_pcvr
    int32 gcpm_real_cost = 37;
    int32 first_bid = 38;
    double final_alpha = 39;
    double final_beta = 40;
    double first_avg_pcvr = 41;
    int32 given_cpa = 42; // 目标转化成本
    int32 raw_bid = 43;
    double raw_first_pctr = 44;
    double raw_final_pctr = 45;
    double first_p_conversion = 46;
    double first_p_like = 47;
    double first_p_collect = 48;
    double first_p_comment = 49;
    double first_p_share = 50;
    double first_p_follow = 51;
    double first_p_page_time = 52;
}

message AdpvInfo {
    RequestInfo request_info = 1;
    repeated AdsInfo ads_info = 2;
}